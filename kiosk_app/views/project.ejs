<!doctype html>
<html lang='en' class='h-100' data-bs-theme='auto'>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <% let title = lang.project + ': ' + project.name %>
    <title><%= title %></title>
    <link href='bootstrap.min.css' rel='stylesheet'>
    <link rel='stylesheet' href='/style.css' />
  </head>
  <body class='d-flex flex-column h-100'>
    <main class='flex-shrink-0'>
      <div class='container'>
        <%- include('home_button', { url: './', text: lang.home_button }) %>

        <div class='d-grid gap-2 row-gap-100 col-6 mx-auto'>
          <h1 class='mb-4'><%= project.name %></h1>

          <% if(project.active) { -%>
            <div class="d-grid col-2 py-2 alert alert-success">
              <%= lang.projects.active %>
            </div>
          <% } else { -%>
            <div class="d-grid col-2 py-2 alert alert-secondary">
              <%= lang.projects.inactive %>
            </div>
          <% } -%>
          <!-- <p><strong>ID: </strong><%= project.$loki %></p> -->
          <!-- <p><strong><%= lang.user %>:</strong></br><%= project.user %></p> -->

          <div class="mt-3"><strong><%= lang.projects.team %>:</strong>
            <ul class="mb-0">
            <% project.team.forEach((member) => { -%>
              <li><%= member.name %></li>
            <% }); -%>
            </ul>
          </div>

          <div class="mt-3"><strong><%= lang.projects.date_start %>:</strong></br><%= project.date_start %></div>

          <div class="mt-3" style="white-space: pre-wrap;"><strong><%= lang.projects.description %>:</strong></br><%= project.description %></div>

          <div class="mt-3"><strong><%= lang.projects.tools %>:</strong>
            <ul class="mb-0">
            <% if(typeof project.tools != 'undefined' && typeof project.tools[0] != 'undefined' && project.tools[0] != null) { project.tools.forEach((tool) => { -%>
              <li><%= lang.projects.tool_list[tool.alias] %></li>
            <% }); } -%>
            <% if(project.tools_other) { -%>
              <li><%= project.tools_other %></li>
            <% } -%>
            </ul>
          </div>

          <div class="mt-3"><strong><%= lang.projects.materials %>:</strong>
            <ul class="mb-0">
            <% if(typeof project.materials != 'undefined' && typeof project.materials[0] != 'undefined' && project.materials[0] != null) { project.materials.forEach((material) => { -%>
              <li><%= lang.projects.material_list[material] %></li>
            <% }); } -%>
            <% if(project.materials_other) { -%>
              <li><%= project.materials_other %></li>
            <% }  -%>
            </ul>
          </div>

          <hr>

          <h3><%= lang.projects.log %></h3>

          <% if(project.log) { -%>
            <% project.log.forEach((log) => { -%>
            <h5><%= log.date %></h5>
            <p><%= log.log_msg %></p>
            <% }); -%>
          <% } -%>

          <hr>

          <h3><%= lang.projects.hours %></h3>

          <% project.team.forEach((member) => { -%>
            <ul class="list-group list-group-horizontal mb-1">
              <li class="list-group-item col-8"><%= member.name %></li>
              <li class="list-group-item col-4"><%= member.hours %></li>
            </ul>
          <% }); -%>

          <% project.tools.forEach((tool) => { -%>
            <ul class="list-group list-group-horizontal mb-1">
              <li class="list-group-item col-8"><%= lang.projects.tool_list[tool.alias] %></li>
              <li class="list-group-item col-4"><%= tool.hours %></li>
            </ul>
          <% }); -%>

          <hr>

          <h3><%= lang.projects.media %></h3>

          <hr>
<!-- 
          <% if(!project.active) { -%>
            <h3><%= lang.projects.feedback %></h3>

            <hr>
          <% } -%>
 -->
          <div class='d-grid col-4 mt-3 mb-5 gap-3'>
            <a class='btn btn-primary' href='../projects/update?id=<%= project.$loki %>' type='button'><%= lang.home.update_project %></a>
            <a class='btn btn-primary' href='../projects/edit?id=<%= project.$loki %>' type='button'><%= lang.home.edit_project %></a>
            <a class='btn btn-primary' href='../projects/close?id=<%= project.$loki %>' type='button'><%= lang.home.close_project %></a>
            <a class='btn btn-danger' href='../projects/delete?id=<%= project.$loki %>' type='button'><%= lang.home.delete_project %></a>
          </div>

        </div>
      </div>
    </main>
  </body>
</html>